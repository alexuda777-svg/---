<!DOCTYPE html>
<html>
<head>
    <title>üè∞ –¢–∞–π–Ω–∞ –ü—Ä–æ–∫–ª—è—Ç–æ–≥–æ –ó–∞–º–∫–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: radial-gradient(circle at center, #1a0033 0%, #000011 70%, #000000 100%);
            color: #e0e0ff; 
            font-family: 'Courier New', monospace;
            min-height: 100vh; 
            overflow-x: hidden;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><radialGradient id="g" cx="50%" cy="50%"><stop offset="0%" stop-color="%23ffffff11"/><stop offset="50%" stop-color="%23ffffff00"/><stop offset="100%" stop-color="%23aa00ff00"/></radialGradient></defs><circle cx="20" cy="20" r="2" fill="url(%23g)"><animate attributeName="cy" values="20;80;20" dur="8s" repeatCount="indefinite"/></circle><circle cx="80" cy="80" r="1.5" fill="url(%23g)"><animate attributeName="cy" values="80;20;80" dur="10s" repeatCount="indefinite"/></circle></svg>');
            pointer-events: none;
            z-index: 1;
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 20px; 
            position: relative;
            z-index: 10;
        }
        .header {
            text-align: center;
            background: linear-gradient(90deg, #aa00ff, #00ffff, #44ff44);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 0 0 30px #aa00ff55;
            animation: glow 3s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { filter: drop-shadow(0 0 10px #aa00ff); }
            to { filter: drop-shadow(0 0 20px #00ffff); }
        }
        .status-bar {
            background: rgba(0,20,60,0.95);
            border: 2px solid #44aaff;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 15px;
            box-shadow: 0 0 25px rgba(68,170,255,0.4);
        }
        .stat { text-align: center; }
        .hp { color: #ff4444; font-size: 1.4em; font-weight: bold; }
        .strength { color: #ffaa00; }
        .magic { color: #aa44ff; }
        .gold { color: #ffd700; }
        .scene {
            background: rgba(10,10,25,0.95);
            border: 2px solid #666;
            border-radius: 20px;
            padding: 30px;
            min-height: 400px;
            margin-bottom: 25px;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8), 0 0 40px rgba(170,0,255,0.2);
            position: relative;
            overflow: hidden;
        }
        .scene::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, transparent 40%, rgba(170,0,255,0.03) 50%, transparent 60%);
            animation: float 20s infinite linear;
        }
        @keyframes float { 0% { transform: translate(0,0) rotate(0deg); } 100% { transform: translate(50px,-50px) rotate(360deg); } }
        .scene-text { 
            position: relative; 
            z-index: 2; 
            line-height: 1.6;
            font-size: 1.1em;
        }
        .highlight { 
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            padding: 2px 8px;
            border-radius: 4px;
            color: #ffdd44;
            font-weight: bold;
        }
        .danger { color: #ff6666; }
        .success { color: #44ff44; }
        .magic-text { color: #aa44ff; text-shadow: 0 0 10px #aa44ff55; }
        .choices {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .choice-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            border: none;
            padding: 20px 25px;
            font-size: 1.2em;
            font-family: inherit;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }
        .choice-btn::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .choice-btn:hover::before { left: 100%; }
        .choice-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(102,126,234,0.6);
        }
        .inventory {
            background: rgba(0,50,20,0.9);
            border: 2px solid #44aa44;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .item {
            background: linear-gradient(45deg, #44aa44, #88dd88);
            color: #000;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .battle-log {
            background: rgba(80,0,0,0.95);
            border: 2px solid #ff4444;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        .victory { background: linear-gradient(45deg, #44ff44, #00ff88) !important; color: #000 !important; }
        .defeat { background: linear-gradient(45deg, #ff4444, #ff8888) !important; color: #000 !important; }
        @media (max-width: 600px) {
            .status-bar { grid-template-columns: 1fr; text-align: center; }
            .choice-btn { padding: 15px 20px; font-size: 1em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="header">üè∞ –¢–ê–ô–ù–ê –ü–†–û–ö–õ–Ø–¢–û–ì–û –ó–ê–ú–ö–ê</h1>
        
        <div class="status-bar">
            <div class="stat">
                <div>‚öîÔ∏è <span id="player-name">–ì–µ—Ä–æ–π</span></div>
                <div class="hp" id="hp">100/100</div>
            </div>
            <div class="stat">
                <div>üí™ –°–∏–ª–∞</div>
                <div class="strength" id="strength">10</div>
            </div>
            <div class="stat">
                <div>‚ú® –ú–∞–≥–∏—è</div>
                <div class="magic" id="magic">0</div>
            </div>
            <div class="stat">
                <div>ü™ô –ó–æ–ª–æ—Ç–æ</div>
                <div class="gold" id="gold">0</div>
            </div>
        </div>

        <div class="scene">
            <div class="scene-text" id="scene-text">
                <div class="magic-text">üîÆ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä–µ–≤–Ω–µ–π –º–∞–≥–∏–∏...</div>
            </div>
            <div class="inventory" id="inventory" style="display: none;"></div>
        </div>

        <div class="choices" id="choices"></div>
        <div class="battle-log" id="battle-log" style="display: none;"></div>
    </div>

    <script>
        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ ====================
        const gameState = {
            player: {
                name: '',
                hp: 100, maxHp: 100,
                strength: 10, 
                magic: 0,
                gold: 0,
                inventory: [],
                equippedWeapon: null
            },
            currentRoom: 'intro',
            battle: {
                active: false,
                enemy: null,
                turn: 0
            }
        };

        // ==================== –ë–û–ì–ê–¢–´–ô –°–Æ–ñ–ï–¢ ====================
        const gameWorld = {
            intro: {
                text: [
                    "üåô <span class='highlight'>–ù–æ—á—å 13-–≥–æ —á–∏—Å–ª–∞</span>. –ì—Ä–æ–∑–∞ –±—É—à—É–µ—Ç –Ω–∞–¥ <span class='danger'>–ü—Ä–æ–∫–ª—è—Ç—ã–º –ó–∞–º–∫–æ–º</span>.",
                    "–¢—ã —Å—Ç–æ–∏—à—å —É —á—ë—Ä–Ω—ã—Ö –≤—Ä–∞—Ç. –í–µ—Ç–µ—Ä –Ω–µ—Å—ë—Ç —à–µ–ø–æ—Ç: <span class='magic-text'>'–ù–∞—Å–ª–µ–¥–Ω–∏–∫... –∏–¥–∏...'</span>",
                    "–û—Ç–µ—Ü –ø—Ä–æ–ø–∞–ª –∑–¥–µ—Å—å 13 –ª–µ—Ç –Ω–∞–∑–∞–¥. –í —Ä—É–∫–µ ‚Äî –µ–≥–æ –∫–æ–º–ø–∞—Å, —Å—Ç—Ä–µ–ª–∫–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ <span class='highlight'>—Ç—Ä–µ–ø–µ—â–µ—Ç</span>.",
                    "üö™ <span class='danger'>–í–æ–π—Ç–∏ –≤ –∑–∞–º–æ–∫?</span>"
                ],
                choices: [
                    { text: "‚öîÔ∏è –í–æ–π—Ç–∏ —Å –±–æ–µ–º", next: 'hallway_bold', strengthReq: 0 },
                    { text: "üïØÔ∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ –≤–æ–π—Ç–∏", next: 'hallway_cautious', strengthReq: 0 },
                    { text: "üîÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–≥–∏—é", next: 'hallway_magic', magicReq: 5 }
                ]
            },
            hallway_bold: {
                text: [
                    "‚öîÔ∏è –¢—ã –≤—Ä—ã–≤–∞–µ—à—å—Å—è –≤ –≥–ª–∞–≤–Ω—ã–π –∑–∞–ª!",
                    "üíÄ <span class='danger'>–°–∫–µ–ª–µ—Ç—ã-—Å—Ç—Ä–∞–∂–∏</span> –æ–∂–∏–≤–∞—é—Ç! 3 –ø—Ä–æ—Ç–∏–≤ 1!",
                    "üé≤ [–ë—Ä–æ—Å–æ–∫ —Å–∏–ª—ã: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–æ–π]"
                ],
                onEnter: () => startBattle('skeletons', 15, 8),
                choices: []
            },
            hallway_cautious: {
                text: [
                    "üïØÔ∏è –¢—ã –∫—Ä–∞–¥—ë—à—å—Å—è –ø–æ –∫–æ—Ä–∏–¥–æ—Ä—É.",
                    "–ù–∞—Ö–æ–¥–∏—à—å <span class='success'>–°—Ç–∞—Ä—É—é —à–∫–∞—Ç—É–ª–∫—É</span>.",
                    "üíé –í–Ω—É—Ç—Ä–∏: <span class='highlight'>–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞ (+8 —Å–∏–ª—ã)</span> –∏ 25 –∑–æ–ª–æ—Ç–∞!"
                ],
                onEnter: () => {
                    gameState.player.inventory.push('–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞');
                    gameState.player.gold += 25;
                    gameState.player.strength += 8;
                },
                choices: [
                    { text: "‚û°Ô∏è –î–∞–ª—å—à–µ –ø–æ –∫–æ—Ä–∏–¥–æ—Ä—É", next: 'courtyard' },
                    { text: "üîç –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –±–æ–∫–æ–≤—É—é –¥–≤–µ—Ä—å", next: 'secret_room' }
                ]
            },
            hallway_magic: {
                text: [
                    "üîÆ –¢—ã —à–µ–ø—á–µ—à—å –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ <span class='magic-text'>'Lux Aeterna'</span>.",
                    "üí´ –¢–µ–Ω–∏ —Ä–∞—Å—Å—Ç—É–ø–∞—é—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—è <span class='success'>—Ç–∞–π–Ω—ã–π –ø—Ä–æ—Ö–æ–¥</span>.",
                    "‚ú® +15 –º–∞–≥–∏–∏! –û—Ç–∫—Ä—ã—Ç–∞ <span class='highlight'>–ú–∞–≥–∏—è –¢–µ–Ω–µ–π</span>."
                ],
                onEnter: () => {
                    gameState.player.magic += 15;
                },
                choices: [
                    { text: "üåÄ –¢–∞–π–Ω—ã–π –ø—Ä–æ—Ö–æ–¥", next: 'shadow_realm' },
                    { text: "üè∞ –û–±—ã—á–Ω—ã–π –ø—É—Ç—å", next: 'courtyard' }
                ]
            },
            courtyard: {
                text: [
                    "üåø <span class='highlight'>–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–≤–æ—Ä</span>. –¢—É–º–∞–Ω —Å—Ç–µ–ª–µ—Ç—Å—è –ø–æ –∑–µ–º–ª–µ.",
                    "–ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π <span class='danger'>–ì–∞—Ä–ø–∏—è</span> –æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—É–Ω–¥—É–∫.",
                    "üó°Ô∏è –í –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –æ—Ä—É–∂–∏–µ?"
                ],
                choices: [
                    { text: "‚öîÔ∏è –°—Ä–∞–∑–∏—Ç—å—Å—è —Å –≥–∞—Ä–ø–∏–µ–π", next: 'garpia_fight', weaponReq: '–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞' },
                    { text: "üßô‚Äç‚ôÇÔ∏è –ú–∞–≥–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä", next: 'garpia_magic', magicReq: 10 },
                    { text: "üèÉ –û–±–æ–π—Ç–∏", next: 'throne_room' }
                ]
            },
            throne_room: {
                text: [
                    "üëë <span class='highlight'>–¢—Ä–æ–Ω–Ω—ã–π –∑–∞–ª</span>. –í —Ü–µ–Ω—Ç—Ä–µ ‚Äî <span class='danger'>–ö–æ—Ä–æ–ª—å –î–µ–º–æ–Ω–æ–≤</span>.",
                    "ü™® –û–Ω –≤–æ—Å—Å–µ–¥–∞–µ—Ç –Ω–∞ —Ç—Ä–æ–Ω–µ –∏–∑ –∫–æ—Å—Ç–µ–π. –ì–ª–∞–∑–∞ –≥–æ—Ä—è—Ç <span class='magic-text'>–∞–¥—Å–∫–∏–º –ø–ª–∞–º–µ–Ω–µ–º</span>.",
                    "‚öîÔ∏è <span class='highlight'>–§–ò–ù–ê–õ–¨–ù–ê–Ø –ë–ò–¢–í–ê</span>!"
                ],
                onEnter: () => startBattle('demon_king', 180, 22),
                choices: []
            }
        };

        // ==================== –£–¢–ò–õ–ò–¢–´ ====================
        function updateStatus() {
            document.getElementById('player-name').textContent = gameState.player.name;
            document.getElementById('hp').textContent = `${gameState.player.hp}/${gameState.player.maxHp}`;
            document.getElementById('strength').textContent = gameState.player.strength;
            document.getElementById('magic').textContent = gameState.player.magic;
            document.getElementById('gold').textContent = gameState.player.gold;

            const inv = document.getElementById('inventory');
            if (gameState.player.inventory.length > 0) {
                inv.style.display = 'flex';
                inv.innerHTML = gameState.player.inventory.map(item => 
                    `<span class="item">${item}</span>`
                ).join('');
            }
        }

        function typewriter(texts, callback) {
            const sceneText = document.getElementById('scene-text');
            sceneText.innerHTML = '';
            let currentText = '';
            let charIndex = 0;
            let lineIndex = 0;

            function typeChar() {
                if (charIndex < texts[lineIndex].length) {
                    currentText += texts[lineIndex][charIndex];
                    sceneText.innerHTML = currentText.replace(/\n/g, '<br>');
                    charIndex++;
                    setTimeout(typeChar, 40);
                } else if (lineIndex < texts.length - 1) {
                    lineIndex++;
                    charIndex = 0;
                    currentText += '<br><br>';
                    setTimeout(typeChar, 300);
                } else {
                    callback();
                }
            }
            typeChar();
        }

        function showChoices(choices) {
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            
            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerHTML = choice.text;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
                let canChoose = true;
                if (choice.strengthReq && gameState.player.strength < choice.strengthReq) canChoose = false;
                if (choice.magicReq && gameState.player.magic < choice.magicReq) canChoose = false;
                if (choice.weaponReq && !gameState.player.inventory.includes(choice.weaponReq)) canChoose = false;
                
                if (!canChoose) {
                    btn.style.opacity = '0.5';
                    btn.disabled = true;
                    btn.title = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–ª—ã/–º–∞–≥–∏–∏/–æ—Ä—É–∂–∏—è';
                }
                
                btn.onclick = () => selectChoice(choice);
                choicesDiv.appendChild(btn);
            });
        }

        function selectChoice(choice) {
            gameState.currentRoom = choice.next;
            loadRoom();
        }

        function loadRoom() {
            const room = gameWorld[gameState.currentRoom];
            if (!room) return;
            
            document.getElementById('battle-log').style.display = 'none';
            
            typewriter(room.text, () => {
                if (room.onEnter) room.onEnter();
                showChoices(room.choices);
                updateStatus();
            });
        }

        // ==================== –ë–û–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê ====================
        function startBattle(enemyName, enemyHp, enemyStrength) {
            gameState.battle.active = true;
            gameState.battle.enemy = { name: enemyName, hp: enemyHp, maxHp: enemyHp, strength: enemyStrength };
            gameState.battle.turn = 0;
            
            const battleLog = document.getElementById('battle-log');
            battleLog.style.display = 'block';
            battleLog.innerHTML = `<div class="danger">‚öîÔ∏è –ë–û–ô –° ${enemyName.toUpperCase()}! ‚öîÔ∏è</div>`;
            battleLog.scrollTop = battleLog.scrollHeight;
            
            battleTurn();
        }

        function battleTurn() {
            if (gameState.player.hp <= 0 || gameState.battle.enemy.hp <= 0) {
                endBattle();
                return;
            }
            
            gameState.battle.turn++;
            const log = document.getElementById('battle-log');
            
            // –ê—Ç–∞–∫–∞ –∏–≥—Ä–æ–∫–∞
            const playerDamage = Math.floor(Math.random() * gameState.player.strength) + 5;
            gameState.battle.enemy.hp -= playerDamage;
            log.innerHTML += `<div>üí• <span class="success">${gameState.player.name}</span> –Ω–∞–Ω–æ—Å–∏—Ç <strong>${playerDamage}</strong> —É—Ä–æ–Ω–∞!</div>`;
            
            // –ê—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞
            if (gameState.battle.enemy.hp > 0) {
                const enemyDamage = Math.floor(Math.random() * gameState.battle.enemy.strength) + 3;
                gameState.player.hp -= enemyDamage;
                log.innerHTML += `<div>üíÄ <span class="danger">${gameState.battle.enemy.name}</span> –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É–µ—Ç! <strong>${enemyDamage}</strong> —É—Ä–æ–Ω–∞!</div>`;
            }
            
            log.innerHTML += `<div>üìä ${gameState.player.name}: ${Math.max(0, gameState.player.hp)}HP | ${gameState.battle.enemy.name}: ${Math.max(0, gameState.battle.enemy.hp)}/${gameState.battle.enemy.maxHp}HP</div>`;
            log.scrollTop = log.scrollHeight;
            updateStatus();
            
            if (gameState.player.hp > 0 && gameState.battle.enemy.hp > 0) {
                setTimeout(battleTurn, 1200);
            }
        }

        function endBattle() {
            const log = document.getElementById('battle-log');
            if (gameState.player.hp > 0) {
                log.innerHTML += '<div class="victory">üèÜ <strong>–ü–û–ë–ï–î–ê!</strong> –¢—ã –æ–¥–æ–ª–µ–ª –≤—Ä–∞–≥–∞! +50 –∑–æ–ª–æ—Ç–∞!</div>';
                gameState.player.gold += 50;
                gameState.player.magic += 10;
                setTimeout(() => {
                    gameState.currentRoom = 'courtyard';
                    loadRoom();
                }, 2000);
            } else {
                log.innerHTML += '<div class="defeat">üíÄ <strong>–ü–û–†–ê–ñ–ï–ù–ò–ï!</strong> –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.</div>';
                setTimeout(() => location.reload(), 4000);
            }
        }

        // ==================== –°–¢–ê–†–¢ –ò–ì–†–´ ====================
        gameState.player.name = prompt('üîÆ –í–≤–µ–¥–∏—Ç–µ –∏–º—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –≥–µ—Ä–æ—è:') || '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –¢–µ–Ω–µ–≥–æ–π';
        document.querySelector('.header').textContent = `üè∞ –¢–ê–ô–ù–ê –ü–†–û–ö–õ–Ø–¢–û–ì–û –ó–ê–ú–ö–ê | ${gameState.player.name}`;
        loadRoom();
    </script>
</body>
</html>
