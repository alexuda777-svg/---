<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè∞ –¢–∞–π–Ω–∞ –ü—Ä–æ–∫–ª—è—Ç–æ–≥–æ –ó–∞–º–∫–∞</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:linear-gradient(45deg,#1a0033,#000011);color:#e0e0ff;font-family:monospace;padding:20px;min-height:100vh}
        .container{max-width:900px;margin:0 auto}
        .header{text-align:center;background:linear-gradient(90deg,#aa00ff,#00ffff,#44ff44);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:2.5em;margin:20px 0;text-shadow:0 0 30px #aa00ff55;animation:glow 3s infinite alternate}
        @keyframes glow{0%{filter:drop-shadow(0 0 10px #aa00ff)}100%{filter:drop-shadow(0 0 20px #00ffff)}}
        .status-bar{background:rgba(0,20,60,0.95);border:2px solid #44aaff;border-radius:15px;padding:15px;margin:20px 0;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:15px}
        .stat{text-align:center}
        .hp{color:#ff4444;font-size:1.4em;font-weight:bold}
        .strength{color:#ffaa00}
        .magic{color:#aa44ff}
        .gold{color:#ffd700}
        .scene{background:rgba(10,10,25,0.95);border:2px solid #666;border-radius:20px;padding:30px;min-height:400px;margin:20px 0;box-shadow:0 0 40px rgba(170,0,255,0.2)}
        .scene-text{line-height:1.6;font-size:1.1em}
        .highlight{background:rgba(255,255,0,0.2);padding:2px 8px;border-radius:4px;color:#ffdd44;font-weight:bold}
        .danger{color:#ff6666}
        .success{color:#44ff44}
        .magic-text{color:#aa44ff;text-shadow:0 0 10px #aa44ff}
        .choices{display:flex;flex-direction:column;gap:12px}
        .choice-btn{background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);color:white;border:none;padding:20px;font-size:1.2em;border-radius:12px;cursor:pointer;transition:all .3s;box-shadow:0 8px 25px rgba(0,0,0,0.4);width:100%}
        .choice-btn:hover{transform:translateY(-5px);box-shadow:0 15px 35px rgba(102,126,234,0.6)}
        .choice-btn:disabled{opacity:0.5;transform:none!important;cursor:not-allowed}
        .inventory{background:rgba(0,50,20,0.9);border:2px solid #44aa44;border-radius:12px;padding:15px;margin:15px 0;display:flex;flex-wrap:wrap;gap:10px}
        .item{background:linear-gradient(45deg,#44aa44,#88dd88);color:#000;padding:8px 15px;border-radius:20px;font-weight:bold}
        .battle-log{background:rgba(80,0,0,0.95);border:2px solid #ff4444;border-radius:12px;padding:20px;margin:15px 0;max-height:250px;overflow-y:auto;font-family:monospace}
        .victory{background:linear-gradient(45deg,#44ff44,#00ff88)!important;color:#000!important}
        .defeat{background:linear-gradient(45deg,#ff4444,#ff8888)!important;color:#000!important}
        @media(max-width:600px){.status-bar{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="container">
        <h1 class="header" id="title">üè∞ –¢–ê–ô–ù–ê –ü–†–û–ö–õ–Ø–¢–û–ì–û –ó–ê–ú–ö–ê</h1>
        <div class="status-bar">
            <div class="stat"><div>‚öîÔ∏è <span id="player-name">–ì–µ—Ä–æ–π</span></div><div class="hp" id="hp">150/200</div></div>
            <div class="stat"><div>üí™ –°–∏–ª–∞</div><div class="strength" id="strength">100</div></div>
            <div class="stat"><div>‚ú® –ú–∞–≥–∏—è</div><div class="magic" id="magic">50</div></div>
            <div class="stat"><div>ü™ô –ó–æ–ª–æ—Ç–æ</div><div class="gold" id="gold">150</div></div>
        </div>
        <div class="scene">
            <div class="scene-text" id="scene-text">üîÆ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="inventory" id="inventory" style="display:none"></div>
        </div>
        <div class="choices" id="choices"></div>
        <div class="battle-log" id="battle-log" style="display:none"></div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        let gameState = {
            player: {
                name: prompt('üîÆ –ò–º—è –≥–µ—Ä–æ—è:') || '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –¢–µ–Ω–µ–≥–æ–π',
                hp: 150,
                maxHp: 200,
                strength: 100,
                magic: 50,
                gold: 150,
                inventory: []
            },
            currentRoom: 'intro',
            isBattling: false,
            battleEnemy: null
        };

        function updateUI() {
            document.getElementById('player-name').textContent = gameState.player.name;
            document.getElementById('hp').textContent = `${gameState.player.hp}/${gameState.player.maxHp}`;
            document.getElementById('strength').textContent = gameState.player.strength;
            document.getElementById('magic').textContent = gameState.player.magic;
            document.getElementById('gold').textContent = gameState.player.gold;
            document.getElementById('title').textContent = `üè∞ –¢–ê–ô–ù–ê –ó–ê–ú–ö–ê | ${gameState.player.name}`;
        }

        function showScene(room) {
            const scene = gameWorld[room];
            document.getElementById('scene-text').innerHTML = scene.text.join('<br>');
            
            if (scene.onEnter) scene.onEnter();
            
            const inv = document.getElementById('inventory');
            if (gameState.player.inventory.length > 0) {
                inv.innerHTML = gameState.player.inventory.map(item => `<span class="item">${item}</span>`).join('');
                inv.style.display = 'flex';
            } else {
                inv.style.display = 'none';
            }
            
            showChoices(scene.choices);
            updateUI();
        }

        function showChoices(choices) {
            const choicesEl = document.getElementById('choices');
            choicesEl.innerHTML = '';
            
            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = choice.text;
                btn.onclick = () => handleChoice(choice);
                choicesEl.appendChild(btn);
            });
        }

        function handleChoice(choice) {
            if (choice.cost && gameState.player.gold >= choice.cost) {
                gameState.player.gold -= choice.cost;
                if (choice.effect.strength) gameState.player.strength += choice.effect.strength;
                if (choice.effect.magic) gameState.player.magic += choice.effect.magic;
                if (choice.effect.hp) {
                    gameState.player.hp = Math.min(gameState.player.maxHp, gameState.player.hp + choice.effect.hp);
                }
                if (choice.effect.item) gameState.player.inventory.push(choice.effect.item);
                updateUI();
                showScene(gameState.currentRoom);
                return;
            }
            
            if (choice.next) {
                gameState.currentRoom = choice.next;
                showScene(gameState.currentRoom);
            }
        }

        // üî• –ù–û–í–´–ô –§–ò–ö–° –ë–û–Ø - –†–ï–ö–£–†–°–ò–Ø –ë–ï–ó TIMEOUT!
        function startBattle(enemyName, enemyHp, enemyStr) {
            gameState.isBattling = true;
            gameState.battleEnemy = { name: enemyName, hp: enemyHp, maxHp: enemyHp, strength: enemyStr };
            
            document.getElementById('battle-log').style.display = 'block';
            document.getElementById('battle-log').className = 'battle-log';
            document.getElementById('choices').innerHTML = '';
            
            // –°—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ–º –±–æ–π
            performBattleRound();
        }

        function performBattleRound() {
            if (!gameState.isBattling || !gameState.battleEnemy) return;
            
            const log = document.getElementById('battle-log');
            
            // –£–¥–∞—Ä –∏–≥—Ä–æ–∫–∞
            const playerDmg = Math.max(1, gameState.player.strength - Math.floor(Math.random() * 10));
            gameState.battleEnemy.hp -= playerDmg;
            log.innerHTML += `<div>‚öîÔ∏è ${gameState.player.name} –Ω–∞–Ω–µ—Å <span class="highlight">${playerDmg}</span> —É—Ä–æ–Ω–∞ ${gameState.battleEnemy.name}!</div>`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
            if (gameState.battleEnemy.hp <= 0) {
                log.innerHTML += `<div class="success">üéâ <span class="highlight">–ü–û–ë–ï–î–ê!</span> +100 –∑–æ–ª–æ—Ç–∞!</div>`;
                gameState.player.gold += 100;
                setTimeout(() => finishBattle(true), 1500);
                return;
            }
            
            // –£–¥–∞—Ä –≤—Ä–∞–≥–∞
            const enemyDmg = Math.max(1, gameState.battleEnemy.strength - Math.floor(Math.random() * 15));
            gameState.player.hp -= enemyDmg;
            log.innerHTML += `<div>üíÄ ${gameState.battleEnemy.name} –Ω–∞–Ω–µ—Å <span class="highlight">${enemyDmg}</span> —É—Ä–æ–Ω–∞!</div>`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
            if (gameState.player.hp <= 0) {
                log.innerHTML += `<div class="danger">üíÄ <span class="highlight">–ü–û–†–ê–ñ–ï–ù–ò–ï!</span> –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.</div>`;
                log.className = 'battle-log defeat';
                setTimeout(() => {
                    document.getElementById('choices').innerHTML = '<button class="choice-btn" onclick="location.reload()">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>';
                }, 1500);
                gameState.isBattling = false;
                return;
            }
            
            // –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ —á–µ—Ä–µ–∑ 800–º—Å
            setTimeout(performBattleRound, 800);
        }

        function finishBattle(victory) {
            gameState.isBattling = false;
            gameState.battleEnemy = null;
            
            if (victory) {
                gameState.currentRoom = 'hallway_victory';
                document.getElementById('battle-log').style.display = 'none';
                showScene(gameState.currentRoom);
            }
        }

        // –ò–≥—Ä–æ–≤–æ–π –º–∏—Ä
        const gameWorld = {
            intro: {
                text: ["üåô <span class='highlight'>–ù–æ—á—å 13-–≥–æ</span>. –ì—Ä–æ–∑–∞ –Ω–∞–¥ <span class='danger'>–ü—Ä–æ–∫–ª—è—Ç—ã–º –ó–∞–º–∫–æ–º</span>.",
                       "–¢—ã —Å—Ç–æ–∏—à—å —É —á—ë—Ä–Ω—ã—Ö –≤—Ä–∞—Ç. –í–µ—Ç–µ—Ä —à–µ–ø—á–µ—Ç: <span class='magic-text'>'–ù–∞—Å–ª–µ–¥–Ω–∏–∫... –∏–¥–∏...'</span>",
                       "–û—Ç–µ—Ü –ø—Ä–æ–ø–∞–ª –∑–¥–µ—Å—å 13 –ª–µ—Ç –Ω–∞–∑–∞–¥.",
                       "üö™ –ß—Ç–æ –¥–µ–ª–∞—Ç—å?"],
                choices: [
                    {text: "‚öîÔ∏è –í–æ—Ä–≤–∞—Ç—å—Å—è —Å –±–æ–µ–º", next: 'hallway_bold'},
                    {text: "üïØÔ∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ –≤–æ–π—Ç–∏", next: 'hallway_cautious'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω —Ç–æ—Ä–≥–æ–≤—Ü–∞", next: 'shop'}
                ]
            },
            hallway_bold: {
                text: ["‚öîÔ∏è –¢—ã –≤—Ä—ã–≤–∞–µ—à—å—Å—è –≤ –≥–ª–∞–≤–Ω—ã–π –∑–∞–ª!",
                       "üíÄ <span class='danger'>–¢—Ä–∏ —Å–∫–µ–ª–µ—Ç–∞-—Å—Ç—Ä–∞–∂–∞</span> –æ–∂–∏–≤–∞—é—Ç!",
                       "üé≤ <span class='highlight'>–ë–ò–¢–í–ê –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø!</span>"],
                onEnter: () => startBattle('–°–∫–µ–ª–µ—Ç—ã-—Å—Ç—Ä–∞–∂–∏', 80, 20),
                choices: []
            },
            hallway_victory: {
                text: ["üèÜ <span class='success'>–°–∫–µ–ª–µ—Ç—ã –ø–æ–≤–µ—Ä–∂–µ–Ω—ã!</span>",
                       "üíé –ù–∞—Ö–æ–¥–∏—à—å <span class='highlight'>–ö–ª—é—á –æ—Ç —Å—É–Ω–¥—É–∫–∞</span>.",
                       "‚û°Ô∏è –ö—É–¥–∞ –¥–∞–ª—å—à–µ?"],
                choices: [
                    {text: "‚û°Ô∏è –í–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–≤–æ—Ä", next: 'courtyard'},
                    {text: "üîç –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞", next: 'secret_room'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω", next: 'shop'}
                ]
            },
            hallway_cautious: {
                text: ["üïØÔ∏è –¢—ã –∫—Ä–∞–¥—ë—à—å—Å—è –ø–æ –∫–æ—Ä–∏–¥–æ—Ä—É...",
                       "üíé –ù–∞—Ö–æ–¥–∏—à—å <span class='success'>—Å—Ç–∞—Ä—É—é —à–∫–∞—Ç—É–ª–∫—É</span>!",
                       "<span class='highlight'>–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞ (+20 —Å–∏–ª—ã)</span> +75 –∑–æ–ª–æ—Ç–∞!"],
                onEnter: () => {
                    gameState.player.inventory.push('–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞');
                    gameState.player.gold += 75;
                    gameState.player.strength += 20;
                },
                choices: [
                    {text: "‚û°Ô∏è –í–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–≤–æ—Ä", next: 'courtyard'},
                    {text: "üîç –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞", next: 'secret_room'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω", next: 'shop'}
                ]
            },
            shop: {
                text: ["üõí <span class='highlight'>–¢–ê–ò–ù–°–¢–í–ï–ù–ù–´–ô –¢–û–†–ì–û–í–ï–¶</span>",
                       "üí∞ '–í—ã–±–µ—Ä–∏ —Ç–æ–≤–∞—Ä, –≥–µ—Ä–æ–π:'",
                       "üíé –†–µ–¥–∫–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∑–∞ –∑–æ–ª–æ—Ç–æ!"],
                choices: [
                    {text: "üó°Ô∏è –û–≥–Ω–µ–Ω–Ω—ã–π –º–µ—á (100 –∑–æ–ª–æ—Ç–∞) +30 —Å–∏–ª—ã", next: 'shop', cost: 100, effect: {strength: 30, item: '–û–≥–Ω–µ–Ω–Ω—ã–π –º–µ—á'}},
                    {text: "‚ú® –ö—Ä–∏—Å—Ç–∞–ª–ª –º–∞–Ω—ã (80 –∑–æ–ª–æ—Ç–∞) +40 –º–∞–≥–∏–∏", next: 'shop', cost: 80, effect: {magic: 40, item: '–ö—Ä–∏—Å—Ç–∞–ª–ª –º–∞–Ω—ã'}},
                    {text: "üß™ –°—É–ø–µ—Ä-–∑–µ–ª—å–µ (60 –∑–æ–ª–æ—Ç–∞) +75 HP", next: 'shop', cost: 60, effect: {hp: 75, item: '–°—É–ø–µ—Ä-–∑–µ–ª—å–µ'}},
                    {text: "‚û°Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å", next: 'courtyard'}
                ]
            },
            secret_room: {
                text: ["üîí <span class='highlight'>–°–ï–ö–†–ï–¢–ù–ê–Ø –ö–û–ú–ù–ê–¢–ê</span> —Å –¥—Ä–µ–≤–Ω–∏–º–∏ —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏!",
                       "üí∞ <span class='success'>200 –∑–æ–ª–æ—Ç–∞</span> + <span class='highlight'>–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∞–º—É–ª–µ—Ç</span>",
                       "‚ú® +25 –∫–æ –≤—Å–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º!"],
                onEnter: () => {
                    gameState.player.gold += 200;
                    gameState.player.inventory.push('–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∞–º—É–ª–µ—Ç');
                    gameState.player.strength += 25;
                    gameState.player.magic += 25;
                },
                choices: [
                    {text: "‚û°Ô∏è –í–æ –¥–≤–æ—Ä", next: 'courtyard'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω", next: 'shop'}
                ]
            },
            courtyard: {
                text: ["üåø <span class='highlight'>–í–ù–£–¢–†–ï–ù–ù–ò–ô –î–í–û–†</span>. –¢—É–º–∞–Ω —Å—Ç–µ–ª–µ—Ç—Å—è –ø–æ –∑–µ–º–ª–µ.",
                       "üëπ <span class='danger'>–ì–∞—Ä–ø–∏—è</span> –æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–π —Å—É–Ω–¥—É–∫.",
                       "üó°Ô∏è –ì–æ—Ç–æ–≤ –∫ –±–æ—é?"],
                choices: [
                    {text: "‚öîÔ∏è –°—Ä–∞–∑–∏—Ç—å—Å—è —Å –≥–∞—Ä–ø–∏–µ–π", next: 'garpia_fight'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω", next: 'shop'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'intro'}
                ]
            },
            garpia_fight: {
                text: ["üëπ <span class='danger'>–ì–ê–†–ü–ò–Ø –†–´–ß–ò–¢!</span>",
                       "üé≤ <span class='highlight'>–≠–ü–ò–ß–ù–ê–Ø –ë–ò–¢–í–ê!</span>"],
                onEnter: () => startBattle('–ì–∞—Ä–ø–∏—è', 120, 25),
                choices: []
            }
        };

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        updateUI();
        showScene('intro');
    </script>
</body>
</html>


