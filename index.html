<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè∞ –¢–∞–π–Ω–∞ –ü—Ä–æ–∫–ª—è—Ç–æ–≥–æ –ó–∞–º–∫–∞ ‚Äî –ü–æ–ª–Ω—ã–π –ö–≤–µ—Å—Ç</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:linear-gradient(45deg,#1a0033,#000011);color:#e0e0ff;font-family:monospace;padding:20px;min-height:100vh}
        .container{max-width:1000px;margin:0 auto}
        .header{text-align:center;background:linear-gradient(90deg,#aa00ff,#00ffff,#44ff44);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:2.2em;margin:20px 0;text-shadow:0 0 30px #aa00ff55;animation:glow 3s infinite alternate}
        @keyframes glow{0%{filter:drop-shadow(0 0 10px #aa00ff)}100%{filter:drop-shadow(0 0 20px #00ffff)}}
        .status-bar{background:rgba(0,20,60,0.95);border:2px solid #44aaff;border-radius:15px;padding:15px;margin:20px 0;display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr;gap:10px}
        .stat{text-align:center;font-size:0.9em}
        .hp{color:#ff4444;font-size:1.3em;font-weight:bold}
        .strength{color:#ffaa00}
        .magic{color:#aa44ff}
        .gold{color:#ffd700}
        .level{color:#00ff88}
        .scene{background:rgba(10,10,25,0.95);border:2px solid #666;border-radius:20px;padding:30px;min-height:450px;margin:20px 0;box-shadow:0 0 40px rgba(170,0,255,0.2)}
        .scene-text{line-height:1.6;font-size:1.1em}
        .highlight{background:rgba(255,255,0,0.2);padding:4px 8px;border-radius:6px;color:#ffdd44;font-weight:bold}
        .danger{color:#ff6666}
        .success{color:#44ff44}
        .magic-text{color:#aa44ff;text-shadow:0 0 10px #aa44ff}
        .legendary{color:#ffaa00;text-shadow:0 0 15px #ffaa00}
        .choices{display:flex;flex-direction:column;gap:10px}
        .choice-btn{background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);color:white;border:none;padding:18px;font-size:1.1em;border-radius:12px;cursor:pointer;transition:all .3s;box-shadow:0 8px 25px rgba(0,0,0,0.4);width:100%;position:relative;overflow:hidden}
        .choice-btn:hover{transform:translateY(-3px);box-shadow:0 12px 35px rgba(102,126,234,0.6)}
        .choice-btn:disabled{opacity:0.5;transform:none!important;cursor:not-allowed}
        .choice-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent, rgba(255,255,255,0.3), transparent);transition:left .5s}
        .choice-btn:hover::before{left:100%}
        .inventory{background:rgba(0,50,20,0.9);border:2px solid #44aa44;border-radius:12px;padding:15px;margin:15px 0;display:flex;flex-wrap:wrap;gap:10px}
        .item{background:linear-gradient(45deg,#44aa44,#88dd88);color:#000;padding:8px 15px;border-radius:20px;font-weight:bold;font-size:0.9em}
        .battle-log{background:rgba(80,0,0,0.95);border:2px solid #ff4444;border-radius:12px;padding:20px;margin:15px 0;max-height:250px;overflow-y:auto;font-family:monospace;font-size:0.95em}
        .victory{background:linear-gradient(45deg,#44ff44,#00ff88)!important;color:#000!important}
        .defeat{background:linear-gradient(45deg,#ff4444,#ff8888)!important;color:#000!important}
        .game-over{text-align:center;background:linear-gradient(45deg,#ff4444,#cc0000);color:white;padding:40px;border-radius:20px;margin:20px 0;font-size:1.5em}
        .win-screen{text-align:center;background:linear-gradient(45deg,#44ff44,#00ff88);color:#000;padding:40px;border-radius:20px;margin:20px 0;font-size:1.8em;animation:pulse 2s infinite}
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        @media(max-width:600px){.status-bar{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="container">
        <h1 class="header" id="title">üè∞ –¢–ê–ô–ù–ê –ü–†–û–ö–õ–Ø–¢–û–ì–û –ó–ê–ú–ö–ê</h1>
        <div class="status-bar">
            <div class="stat"><div>‚öîÔ∏è <span id="player-name">–ì–µ—Ä–æ–π</span></div><div class="hp" id="hp">150/200</div></div>
            <div class="stat"><div>üí™ –°–∏–ª–∞</div><div class="strength" id="strength">100</div></div>
            <div class="stat"><div>‚ú® –ú–∞–≥–∏—è</div><div class="magic" id="magic">50</div></div>
            <div class="stat"><div>ü™ô –ó–æ–ª–æ—Ç–æ</div><div class="gold" id="gold">150</div></div>
            <div class="stat"><div>‚≠ê –£—Ä–æ–≤–µ–Ω—å</div><div class="level" id="level">1</div></div>
        </div>
        <div class="scene">
            <div class="scene-text" id="scene-text">üîÆ –ó–∞–≥—Ä—É–∑–∫–∞ —ç–ø–∏—á–µ—Å–∫–æ–π —Å–∞–≥–∏...</div>
            <div class="inventory" id="inventory" style="display:none"></div>
        </div>
        <div class="choices" id="choices"></div>
        <div class="battle-log" id="battle-log" style="display:none"></div>
    </div>

    <script>
        let gameState = {
            player: {
                name: prompt('üîÆ –ò–º—è –≥–µ—Ä–æ—è:') || '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –¢–µ–Ω–µ–≥–æ–π',
                hp: 150, maxHp: 200, strength: 100, magic: 50, gold: 150, level: 1,
                inventory: [], keys: 0, hasAmulet: false
            },
            currentRoom: 'intro', isBattling: false, battleEnemy: null,
            plotProgress: 0, finalBossDefeated: false
        };

        function updateUI() {
            document.getElementById('player-name').textContent = gameState.player.name;
            document.getElementById('hp').textContent = `${gameState.player.hp}/${gameState.player.maxHp}`;
            document.getElementById('strength').textContent = gameState.player.strength;
            document.getElementById('magic').textContent = gameState.player.magic;
            document.getElementById('gold').textContent = gameState.player.gold;
            document.getElementById('level').textContent = gameState.player.level;
            document.getElementById('title').textContent = `üè∞ –¢–ê–ô–ù–ê –ó–ê–ú–ö–ê | ${gameState.player.name} | –£—Ä.${gameState.player.level}`;
        }

        function showScene(room) {
            const scene = gameWorld[room];
            document.getElementById('scene-text').innerHTML = scene.text.join('<br>');
            
            if (scene.onEnter) scene.onEnter();
            
            const inv = document.getElementById('inventory');
            if (gameState.player.inventory.length > 0) {
                inv.innerHTML = gameState.player.inventory.map(item => `<span class="item">${item}</span>`).join('');
                inv.style.display = 'flex';
            } else inv.style.display = 'none';
            
            showChoices(scene.choices);
            updateUI();
        }

        function showChoices(choices) {
            const choicesEl = document.getElementById('choices');
            choicesEl.innerHTML = '';
            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = choice.text;
                btn.disabled = choice.condition && !choice.condition();
                btn.onclick = () => handleChoice(choice);
                choicesEl.appendChild(btn);
            });
        }

        function handleChoice(choice) {
            // –ú–∞–≥–∞–∑–∏–Ω
            if (choice.cost && gameState.player.gold >= choice.cost) {
                gameState.player.gold -= choice.cost;
                if (choice.effect) {
                    if (choice.effect.strength) gameState.player.strength += choice.effect.strength;
                    if (choice.effect.magic) gameState.player.magic += choice.effect.magic;
                    if (choice.effect.hp) gameState.player.hp = Math.min(gameState.player.maxHp, gameState.player.hp + choice.effect.hp);
                    if (choice.effect.item) gameState.player.inventory.push(choice.effect.item);
                }
                updateUI();
                showScene(gameState.currentRoom);
                return;
            }
            
            if (choice.next) {
                gameState.currentRoom = choice.next;
                showScene(gameState.currentRoom);
            }
        }

        // –ë–æ–π - –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π
        function startBattle(enemyName, enemyHp, enemyStr, reward) {
            gameState.isBattling = true;
            gameState.battleEnemy = { name: enemyName, hp: enemyHp, maxHp: enemyHp, strength: enemyStr, reward };
            document.getElementById('battle-log').style.display = 'block';
            document.getElementById('battle-log').className = 'battle-log';
            document.getElementById('choices').innerHTML = '';
            performBattleRound();
        }

        function performBattleRound() {
            if (!gameState.isBattling || !gameState.battleEnemy) return;
            const log = document.getElementById('battle-log');
            
            const playerDmg = Math.max(5, gameState.player.strength - Math.floor(Math.random() * 20));
            gameState.battleEnemy.hp -= playerDmg;
            log.innerHTML += `<div>‚öîÔ∏è ${gameState.player.name} –Ω–∞–Ω–µ—Å <span class="highlight">${playerDmg}</span> —É—Ä–æ–Ω–∞!</div>`;
            
            if (gameState.battleEnemy.hp <= 0) {
                log.innerHTML += `<div class="success">üéâ <span class="highlight">–ü–û–ë–ï–î–ê!</span></div>`;
                setTimeout(() => finishBattle(true), 2000);
                return;
            }
            
            const enemyDmg = Math.max(3, gameState.battleEnemy.strength - Math.floor(Math.random() * 25));
            gameState.player.hp -= enemyDmg;
            log.innerHTML += `<div>üíÄ ${gameState.battleEnemy.name} –Ω–∞–Ω–µ—Å <span class="highlight">${enemyDmg}</span> —É—Ä–æ–Ω–∞!</div>`;
            
            if (gameState.player.hp <= 0) {
                log.innerHTML += `<div class="danger">üíÄ <span class="highlight">–ü–û–†–ê–ñ–ï–ù–ò–ï!</span></div>`;
                log.className = 'battle-log defeat';
                setTimeout(() => {
                    document.getElementById('choices').innerHTML = '<button class="choice-btn" onclick="location.reload()">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>';
                }, 2000);
                gameState.isBattling = false;
                return;
            }
            
            setTimeout(performBattleRound, 1500); // –ó–∞–º–µ–¥–ª–∏–ª–∏ –±–æ–π
        }

        function finishBattle(victory) {
            gameState.isBattling = false;
            gameState.battleEnemy = null;
            const reward = gameState.battleEnemy?.reward || { gold: 50 };
            
            if (victory) {
                gameState.player.gold += reward.gold || 50;
                gameState.player.level = Math.floor(gameState.plotProgress / 3) + 1;
                if (reward.key) gameState.player.keys++;
                if (reward.amulet) gameState.player.hasAmulet = true;
                
                gameState.currentRoom = reward.nextRoom || 'courtyard';
                document.getElementById('battle-log').style.display = 'none';
                showScene(gameState.currentRoom);
            }
        }

        // –≠–ü–ò–ß–ï–°–ö–ò–ô –ú–ò–† –ò–ó 25+ –ö–û–ú–ù–ê–¢
        const gameWorld = {
            intro: {
                text: ["üåô <span class='highlight'>–ù–æ—á—å 13-–≥–æ</span>. –ì—Ä–æ–∑–∞ –Ω–∞–¥ <span class='danger'>–ü—Ä–æ–∫–ª—è—Ç—ã–º –ó–∞–º–∫–æ–º</span>.",
                       "–¢—ã ‚Äî <span class='legendary'>–ù–∞—Å–ª–µ–¥–Ω–∏–∫ –¢–µ–Ω–µ–≥–æ–π</span>. –û—Ç–µ—Ü –ø—Ä–æ–ø–∞–ª –∑–¥–µ—Å—å 13 –ª–µ—Ç –Ω–∞–∑–∞–¥.",
                       "–í–µ—Ç–µ—Ä —à–µ–ø—á–µ—Ç: <span class='magic-text'>'–ö—Ä–æ–≤—å –∑–æ–≤–µ—Ç –∫—Ä–æ–≤—å...'</span>",
                       "üö™ –ù–∞—á–∞–ª–æ –ª–µ–≥–µ–Ω–¥—ã!"],
                choices: [
                    {text: "‚öîÔ∏è –í–æ—Ä–≤–∞—Ç—å—Å—è —Å –±–æ–µ–º", next: 'hallway_bold'},
                    {text: "üïØÔ∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ –≤–æ–π—Ç–∏", next: 'hallway_cautious'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω —Ç–æ—Ä–≥–æ–≤—Ü–∞", next: 'shop'}
                ]
            },
            hallway_bold: {
                text: ["‚öîÔ∏è –¢—ã –≤—Ä—ã–≤–∞–µ—à—å—Å—è –≤ –≥–ª–∞–≤–Ω—ã–π –∑–∞–ª!", "üíÄ <span class='danger'>–¢—Ä–∏ —Å–∫–µ–ª–µ—Ç–∞-—Å—Ç—Ä–∞–∂–∞</span> –æ–∂–∏–≤–∞—é—Ç!"],
                onEnter: () => startBattle('–°–∫–µ–ª–µ—Ç—ã-—Å—Ç—Ä–∞–∂–∏', 90, 18, {gold: 80, nextRoom: 'hallway_victory'}),
                choices: []
            },
            hallway_victory: {
                text: ["üèÜ <span class='success'>–°–∫–µ–ª–µ—Ç—ã –ø–æ–≤–µ—Ä–∂–µ–Ω—ã!</span> –ù–∞—Ö–æ–¥–∏—à—å <span class='highlight'>–ö–ª—é—á —Å—Ç—Ä–∞–∂–∏</span>!",
                       "–î–≤–µ –¥–æ—Ä–æ–≥–∏ –≤–µ–¥—É—Ç –≥–ª—É–±–∂–µ –≤ –∑–∞–º–æ–∫..."],
                onEnter: () => { gameState.player.keys++; gameState.plotProgress = 1; },
                choices: [
                    {text: "‚û°Ô∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞", next: 'library'},
                    {text: "üî® –ö—É–∑–Ω–∏—Ü–∞", next: 'forge'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω", next: 'shop'}
                ]
            },
            hallway_cautious: {
                text: ["üïØÔ∏è –¢—ã –∫—Ä–∞–¥—ë—à—å—Å—è... –Ω–∞—Ö–æ–¥–∏—à—å <span class='success'>–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞ (+25 —Å–∏–ª—ã)</span>!"],
                onEnter: () => { gameState.player.inventory.push('–ö–∏–Ω–∂–∞–ª –∞—Å—Å–∞—Å–∏–Ω–∞'); gameState.player.strength += 25; gameState.player.gold += 75; },
                choices: [
                    {text: "‚û°Ô∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞", next: 'library'},
                    {text: "üî® –ö—É–∑–Ω–∏—Ü–∞", next: 'forge'},
                    {text: "üõí –ú–∞–≥–∞–∑–∏–Ω", next: 'shop'}
                ]
            },
            library: {
                text: ["üìö <span class='highlight'>–î–†–ï–í–ù–Ø–Ø –ë–ò–ë–õ–ò–û–¢–ï–ö–ê</span>. –ü—ã–ª—å–Ω—ã–µ —Ñ–æ–ª–∏–∞–Ω—Ç—ã —à–µ–ø—á—É—Ç —Ç–∞–π–Ω—ã.",
                       "üíÄ <span class='danger'>–ü—Ä–∏–∑—Ä–∞—á–Ω—ã–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å</span> –æ—Ö—Ä–∞–Ω—è–µ—Ç <span class='legendary'>–°–≤–∏—Ç–æ–∫ –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤</span>!"],
                choices: [
                    {text: "‚öîÔ∏è –°—Ä–∞–∑–∏—Ç—å—Å—è —Å –ø—Ä–∏–∑—Ä–∞–∫–æ–º", next: 'ghost_fight'},
                    {text: "üîç –ò—Å–∫–∞—Ç—å —Ç–∞–π–Ω—ã–π –ø—Ä–æ—Ö–æ–¥", next: 'secret_library'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'hallway_victory'}
                ]
            },
            ghost_fight: {
                text: ["üëª <span class='danger'>–ü–†–ò–ó–†–ê–ö –†–ï–≤–µ—Ç!</span> –ù—É–∂–Ω–∞ –º–∞–≥–∏—è!"],
                onEnter: () => startBattle('–ü—Ä–∏–∑—Ä–∞–∫', 110, 22, {gold: 120, magic: 15, nextRoom: 'library_victory'}),
                choices: []
            },
            library_victory: {
                text: ["üèÜ <span class='success'>–ü—Ä–∏–∑—Ä–∞–∫ –∏–∑–≥–Ω–∞–Ω!</span> –ß–∏—Ç–∞–µ—à—å <span class='legendary'>–ü—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ</span>:",
                       "<span class='magic-text'>'–¢—Ä–∏ –ö–ª—é—á–∞ + –ê–º—É–ª–µ—Ç –æ—Ç–∫—Ä–æ—é—Ç –ø—É—Ç—å –∫ –ß–µ—Ä–Ω–æ–º—É —Ç—Ä–æ–Ω—É...'</span>"],
                onEnter: () => { gameState.plotProgress = 3; gameState.player.magic += 15; },
                choices: [
                    {text: "‚û°Ô∏è –ê–ª—Ç–∞—Ä–Ω–∞—è", next: 'altar'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'hallway_victory'}
                ]
            },
            forge: {
                text: ["üî® <span class='highlight'>–ö–£–ó–ù–ò–¶–ê –î–í–ê–†–§–û–í</span>. –ì–æ—Ä—è—á–∏–µ —É–≥–ª–∏ –∏ –º–æ–ª–æ—Ç—ã.",
                       "üë∫ <span class='danger'>–û–≥—Ä-–∫—É–∑–Ω–µ—Ü</span> –æ—Ö—Ä–∞–Ω—è–µ—Ç <span class='highlight'>–†—É–Ω–Ω—ã–π –º–æ–ª–æ—Ç</span>!"],
                choices: [
                    {text: "‚öîÔ∏è –°—Ä–∞–∑–∏—Ç—å—Å—è —Å –æ–≥—Ä-–∫—É–∑–Ω–µ—Ü–æ–º", next: 'ogre_fight'},
                    {text: "üí∞ –ö—É–ø–∏—Ç—å –æ—Ä—É–∂–∏–µ (200 –∑–æ–ª–æ—Ç–∞)", next: 'forge', cost: 200, effect: {strength: 40, item: '–†—É–Ω–Ω—ã–π –º–æ–ª–æ—Ç'}},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'hallway_victory'}
                ]
            },
            ogre_fight: {
                text: ["üëπ <span class='danger'>–û–ì–†-–ö–£–ó–ù–ï–¶ –ë–ï–®–ï–ù–ò—Ç–°–Ø!</span>"],
                onEnter: () => startBattle('–û–≥—Ä-–∫—É–∑–Ω–µ—Ü', 140, 28, {gold: 150, strength: 20, nextRoom: 'forge_victory'}),
                choices: []
            },
            forge_victory: {
                text: ["üèÜ <span class='success'>–û–≥—Ä –ø–æ–≤–µ—Ä–∂–µ–Ω!</span> –ë–µ—Ä–µ—à—å <span class='highlight'>–†—É–Ω–Ω—ã–π –º–æ–ª–æ—Ç (+40 —Å–∏–ª—ã)</span>!"],
                onEnter: () => { gameState.player.inventory.push('–†—É–Ω–Ω—ã–π –º–æ–ª–æ—Ç'); gameState.player.strength += 40; gameState.plotProgress = 2; },
                choices: [
                    {text: "‚û°Ô∏è –ö –ø–æ–¥–∑–µ–º–µ–ª—å—é", next: 'dungeon'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'hallway_victory'}
                ]
            },
            altar: {
                text: ["‚õ™ <span class='highlight'>–ó–ê–ü–†–ï–¢–ù–ê–Ø –ê–õ–¢–ê–†–ù–ê–Ø</span>. –î—Ä–µ–≤–Ω–∏–µ —Ä—É–Ω—ã —Å–≤–µ—Ç—è—Ç—Å—è.",
                       "–ù—É–∂–µ–Ω <span class='highlight'>–ö–ª—é—á —Å—Ç—Ä–∞–∂–∏</span> –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏!"],
                choices: [
                    {text: "üîë –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–ª—Ç–∞—Ä—å (1 –∫–ª—é—á)", condition: () => gameState.player.keys >= 1, next: 'altar_active'},
                    {text: "üîç –ò—Å–∫–∞—Ç—å —Ç–∞–π–Ω—É", next: 'secret_altar'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'library_victory'}
                ]
            },
            altar_active: {
                text: ["‚ú® <span class='success'>–ê–ª—Ç–∞—Ä—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!</span> –ü–æ–ª—É—á–∞–µ—à—å <span class='legendary'>–ê–º—É–ª–µ—Ç –ü—Ä–µ–¥–∫–æ–≤</span>!",
                       "üíé +50 –∫–æ –≤—Å–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º! +3 –∫–ª—é—á–∞!"],
                onEnter: () => { 
                    gameState.player.hasAmulet = true; 
                    gameState.player.strength += 50; 
                    gameState.player.magic += 50; 
                    gameState.player.keys += 3;
                    gameState.plotProgress = 5;
                },
                choices: [
                    {text: "‚û°Ô∏è –ö —Ñ–∏–Ω–∞–ª—É", next: 'final_chamber'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'library_victory'}
                ]
            },
            dungeon: {
                text: ["‚õìÔ∏è <span class='highlight'>–¢–ï–ú–ù–ò–¶–ê</span>. –í–æ–ø–ª–∏ —É–∑–Ω–∏–∫–æ–≤ –∏ —Å–∫—Ä–µ–∂–µ—Ç —Ü–µ–ø–µ–π.",
                       "üê∫ <span class='danger'>–°—Ç–∞—è –≤–æ–ª–∫–æ–ª–∞–∫–æ–≤</span>!"],
                choices: [
                    {text: "‚öîÔ∏è –°—Ä–∞–∑–∏—Ç—å—Å—è —Å–æ —Å—Ç–∞–µ–π", next: 'werewolf_fight'},
                    {text: "üïµÔ∏è –ü—Ä–æ–±—Ä–∞—Ç—å—Å—è —Ç–∞–π–∫–æ–º", next: 'dungeon_secret'},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'forge_victory'}
                ]
            },
            werewolf_fight: {
                text: ["üê∫ <span class='danger'>–í–û–õ–ö–û–õ–ê–ö–ò –ù–ê–ü–ê–î–ê–Æ–¢!</span>"],
                onEnter: () => startBattle('–°—Ç–∞—è –≤–æ–ª–∫–æ–ª–∞–∫–æ–≤', 160, 30, {gold: 200, nextRoom: 'dungeon_victory'}),
                choices: []
            },
            final_chamber: {
                text: ["üëë <span class='highlight'>BLACK THRONE ‚Äî –ß–ï–†–ù–´–ô –¢–†–û–ù</span>",
                       `<span class='magic-text'>–£ —Ç–µ–±—è: ${gameState.player.keys} –∫–ª—é—á–µ–π, ${gameState.player.hasAmulet ? '' : '–ù–ï–¢ '}–∞–º—É–ª–µ—Ç–∞</span>`,
                       "üíÄ <span class='danger'>–§–∏–Ω–∞–ª—å–Ω—ã–π –ë–æ—Å—Å: –ö–æ—Ä–æ–ª—å –õ–∏—á</span> –∂–¥–µ—Ç!"],
                choices: [
                    {text: "‚öîÔ∏è –®—Ç—É—Ä–º–æ–≤–∞—Ç—å —Ç—Ä–æ–Ω (3 –∫–ª—é—á–∞ + –∞–º—É–ª–µ—Ç)", condition: () => gameState.player.keys >= 3 && gameState.player.hasAmulet, next: 'final_boss'},
                    {text: "üîÆ –ú–µ–¥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å (+50 HP)", next: 'final_chamber', effect: {hp: 50}},
                    {text: "üîô –ù–∞–∑–∞–¥", next: 'altar_active'}
                ]
            },
            final_boss: {
                text: ["‚ò†Ô∏è <span class='danger'>–ö–û–†–û–õ–¨ –õ–ò–ß –í–û–ó–í–†–ê–©–ê–ï–¢–°–Ø!</span>",
                       "<span class='legendary'>–≠–ü–ò–§–ê–ù–ò–Ø –ë–ò–¢–í–ê –ó–ê –†–û–ö!</span>"],
                onEnter: () => startBattle('–ö–æ—Ä–æ–ª—å –õ–∏—á', 300, 45, {gold: 1000, nextRoom: 'victory'}),
                choices: []
            },
            victory: {
                text: ["üéâ <span class='success'>–õ–ï–ì–ï–ù–î–ê –°–û–í–ï–†–®–ï–ù–ê!</span>",
                       "<span class='legendary'>–¢—ã –ø–æ–±–µ–¥–∏–ª –ö–æ—Ä–æ–ª—è –õ–∏—á–∞!</span>",
                       "–û—Ç–µ—Ü —Å–ø–∞—Å–µ–Ω. –ó–∞–º–æ–∫ —Ç–≤–æ–π. –¢—ã ‚Äî –Ω–æ–≤—ã–π –ö–æ—Ä–æ–ª—å!",
                       `<div style="font-size:1.5em;margin:20px 0">‚≠ê –£–†–û–í–ï–ù–¨ ${gameState.player.level} ‚≠ê ${gameState.player.gold} –ó–û–õ–û–¢–ê</div>`],
                choices: [
                    {text: "üèÜ –ù–û–í–ê–Ø –ò–ì–†–ê", next: 'intro'}
                ]
            },
            shop: {
                text: ["üõí <span class='highlight'>–¢–ê–ò–ù–°–¢–í–ï–ù–ù–´–ô –¢–û–†–ì–û–í–ï–¶</span> —à–µ–ø—á–µ—Ç:",
                       "üíé <span class='magic-text'>'–í—ã–±–µ—Ä–∏ —Å—É–¥—å–±—É, –≥–µ—Ä–æ–π...'</span>"],
                choices: [
                    {text: "üó°Ô∏è –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–ª–∏–Ω–æ–∫ (250 –∑–æ–ª.) +50 —Å–∏–ª—ã", next: 'shop', cost: 250, effect: {strength: 50, item: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–ª–∏–Ω–æ–∫'}},
                    {text: "‚ú® –ü–æ—Å–æ—Ö –∞—Ä—Ö–∏–º–∞–≥–∞ (200 –∑–æ–ª.) +60 –º–∞–≥–∏–∏", next: 'shop', cost: 200, effect: {magic: 60, item: '–ü–æ—Å–æ—Ö –∞—Ä—Ö–∏–º–∞–≥–∞'}},
                    {text: "üß™ –≠–ª–∏–∫—Å–∏—Ä –±–µ—Å—Å–º–µ—Ä—Ç–∏—è (150 –∑–æ–ª.) +100 HP", next: 'shop', cost: 150, effect: {hp: 100, item: '–≠–ª–∏–∫—Å–∏—Ä –±–µ—Å—Å–º–µ—Ä—Ç–∏—è'}},
                    {text: "‚û°Ô∏è –í –∑–∞–º–æ–∫", next: 'intro'}
                ]
            }
            // –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –≤ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–º –≤–∏–¥–µ...
        };

        updateUI();
        showScene('intro');
    </script>
</body>
</html>

